- TLS（Transport Layer Security）: 保障网络通信安全的协议

  - 主要应用背景: 客户端和服务器之间 HTTP 通信的加密传输。明文的 HTTP 请求、回应任何截取到的人都可以看得懂其中的内容。对於敏感的通信例如 bank, email 非常危险。
  - TLS 提供
    - 加密通信(`Public-key cryptography algorithm: ECDSA, RSA`)：TLS 使用加密算法来保护数据在传输过程中的安全性。
    - 身份验证(`Public-key cryptography algorithm: ECDSA, RSA`)：向客户端与服务器双方提供对方的身份认证，确保通讯过程中身份没有发生改变。
    - 数据完整性保护 (`Hash Algorithm: SHA-256`)：防止数据在传输过程中被篡改。

- related terms

  - `SSL`: deprecated, TLS 是 SSL 的继任者. 现在说到 SSL 都是指代 TLS。
  - `HTTPs (HTTP secure)` 不是一个新的网络协议，是指 基于 TLS 建立的安全 HTTP 通信 (secure)
  - `HTTP/2 protocol` requires TLS

- TLS 可以使用多种加密算法 for different purpose，具体使用哪些算法取决于协商双方的支持和配置。仅列出最常用的

  - `Public-key cryptography algorithm（Asymmetric Encryption)`: can provide both `identity authentication` and `communication encryption`
    - `ECDSA`(currently widely adopted), `RSA`(old technology, still widely used)
  - `Symmetric Encryption`: 非对称加密计算成本较高，通常会与对称加密结合使用, 在开始时 使用非对称加密进行对称加密的密钥交换，然后 使用对称加密算法加密实际的通信
    - AES, 3DES
  - `Hash Algorithm`: ensure data integrity.
    - SHA256

# Symmetric Encryption

# Asymmetric Encryption (Public-key cryptography algorithm)

- `public key-private key pair`: key pair is generated by certain algorithm (签名算法) like RSA

  - `public key` (think public `lock`)
    - 用于加密数据。
    - 是公开的，可能被任何人得到
  - `private key`
    - 用於解密被 matching public key 加密的数据。
    - 被通信主体雪藏。

- Asymmetric Encryption

  - 服务器和用户分别生成自己的 `public key-private key pair`. says Server: privateS, publicS, Client: privateC, publicC
  - `public key exchange`: 服务器和用户交换 public key, 服务器得到 publicC。用户得到 publicS。
  - 用户到服务器的通信: 用户使用从服务器得到的 publicS 加密， 服务器使用自己雪藏的 privateS 解密
  - 服务器到用户的通信: 服务器使用从用户得到的 publicC 加密。用户使用自己雪藏的 privateC 解密

- Asymmetric Encryption is not just used in TLS, also other applications: SSH, CryptoCurrency...

## TLS Certificate

- 由第三方的认证机构（CA：Certificate Authority）向 business 提供的 Certificate，向用户证明通信的服务器属于这一个 business (provide identity)

- Certificate include:

  - `public key`
  - 服务提供商名，域名， 签发者信息（CA），签名算法 等等。
  - `signatured` by CA with hash algorithm like SHA256

- 在 `public key exchange` 中， 服务器并不是只发送 public key，而是发送它的 TLS Certificate。用户通过 validate certification signature 来确定网站的主体是可信的

  - (所有浏览器都会有一个 certificate validation mechanism)

- Certificate Signing Request(CSR): to request a Certificate from CA, by providing your public key and domain name

### CA validation

### Private CA

# In action

- private key location depends on os, Linux common directories include "/etc/ssl/private/" or "~/.ssl/".
